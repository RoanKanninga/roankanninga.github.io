<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Roankanninga.GitHub.io : ">

    <link rel="stylesheet" type="text/css" media="screen" href="https://roankanninga.github.io/stylesheets/stylesheet.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
        <script>
    $(function(){
        $("#includedContent").load("https://roankanninga.github.io/content.html");
    });
    </script>
    <title>Roankanninga.GitHub.io</title>
  </head>

  <body>
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/RoanKanninga">View on GitHub</a>

          <h1 id="project_title">Roankanninga.GitHub.io</h1>
          <h2 id="project_tagline"></h2>

        </header>
    </div>
<div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>
        <!-- MAIN CONTENT -->
<div id="includedContent"></div>
<pre>
Install environment
1) Get depad-utils and configure environment.
cd ${HOME}
git clone https://github.com/molgenis/depad-utils.git 
or 
download depad-utils.tar.gz https://github.com/molgenis/depad-utils/releases 

Make sure ~/git/depad-utils/hpc-2.x/etc/skel/.bashrc was already deployed as root
and that /etc/skel/.bashrc was copied to your home dir when it was created.
If your .bashrc does not have the stuff from the template, you can add it manually and notify an admin to deploy the template in /etc/skel/.
To verify /apps/modules/modules.bashrc gets sourced: logout + login.
When ${HPC_ENV_PREFIX} is set your are good to continue to the next step.

echo ${HPC_ENV_PREFIX}

2) Create main folders for our HPC environment.
mkdir -m 0755 ${HPC_ENV_PREFIX}
mkdir -m 2775 ${HPC_ENV_PREFIX}/data/
mkdir -m 2775 ${HPC_ENV_PREFIX}/modules/
mkdir -m 2775 ${HPC_ENV_PREFIX}/software/
mkdir -m 2775 ${HPC_ENV_PREFIX}/sources/
mkdir -m 2770 ${HPC_ENV_PREFIX}/.tmp/

3) Configure system to use Lmod as module command.
Note: Lmod must already have been deployed as root using your Linux distro's package manager.
In our case for CentOS use $root>: yum install lmod
cd ~/git/depad-utils/hpc-2.x/apps/modules/
cp -r modules* .lmod/ /apps/modules/

4) Download EasyBuild bootstrap script
export EASYBUILD_VERSION=2.8.1
mkdir -p /apps/sources/EasyBuild/
cd /apps/sources/EasyBuild
curl -O https://raw.githubusercontent.com/hpcugent/easybuild-framework/develop/easybuild/scripts/bootstrap_eb.py
mv bootstrap_eb.py bootstrap_eb_${EASYBUILD_VERSION}.py

5) Bootstrap EasyBuild in apps dir.
python /apps/sources/EasyBuild/bootstrap_eb_${EASYBUILD_VERSION}.py \
${HPC_ENV_PREFIX}

6) Sanity check

logout and login again

module load EasyBuild
module list
eb --version

7) Install toolchain
eb foss-2015b.eb â€“robot

Note: some sources should be downloaded manually

scp gcc-4.9.3.tar.bz2 /apps/sources/g/GCC/
gmp-6.0.0a.tar.bz2 /apps/sources/g/GCC/
mpc-1.0.2.tar.gz /apps/sources/g/GCC/


8) Installing additional packages 
The following packages should be on the cluster/VM (this can only done with root access:
yum install libibverbs-devel
yum install openssl-devel
yum install unzip
yum install libX11-devel
yum install libXrender-devel
yum install libXext-devel
yum install mesa-libGL-devel
yum install mesa-libGLU-devel
</pre>
</div>
  </body>
</html>

